<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>랜덤 퀴즈</title>
<style>
  body { font-family: Arial, sans-serif; padding: 40px; text-align: center; }
  #quizBox { font-size: 22px; margin-bottom: 20px; white-space: pre-line; }
  button {
    padding: 12px 20px; font-size: 18px;
    margin: 10px; cursor: pointer;
  }
  #answerBox { margin-top: 20px; font-size: 20px; color: #444; white-space: pre-line; }
</style>
</head>
<body>

<h1>랜덤 퀴즈</h1>
<div id="quizBox">문제를 불러오는 중...</div>
<button id="showAnswerBtn">정답 보기</button>
<button id="nextBtn">다음 문제</button>

<div id="answerBox"></div>

<script>
// ⭐ 네 구글 시트 CSV 다운로드 링크
const CSV_URL = "https://docs.google.com/spreadsheets/d/16VxOkZhO-TgUWYdQ0BGyGhBR5MKUvyb9Mo6lv4UVx0Q/export?format=csv";

// CSV → 배열 변환
function parseCSV(text) {
    const rows = text.split("\n").map(r => r.split(","));
    const header = rows.shift();  // 첫 줄: 문제, 답, 비고
    return rows
      .filter(r => r[0].trim() !== "") // 빈 줄 제거
      .map(r => ({
        question: r[0],
        answer: r[1] || "",
        note: r[2] || ""
      }));
}

let quizData = [];
let current = null;

// 랜덤 문제 선택
function pickRandom() {
    if (!quizData.length) return;
    current = quizData[Math.floor(Math.random() * quizData.length)];
    document.getElementById("quizBox").textContent = current.question;
    document.getElementById("answerBox").textContent = "";
}

// 정답 표시
document.getElementById("showAnswerBtn").onclick = () => {
    if (!current) return;
    document.getElementById("answerBox").textContent = 
        `정답: ${current.answer}\n\n비고: ${current.note}`;
};

// 다음 문제
document.getElementById("nextBtn").onclick = pickRandom;

// CSV 불러오기
fetch(CSV_URL)
  .then(res => res.text())
  .then(text => {
      quizData = parseCSV(text);
      pickRandom();
  })
  .catch(err => {
      document.getElementById("quizBox").textContent = "CSV 로딩 실패 :(";
      console.error(err);
  });

</script>

</body>
</html>
