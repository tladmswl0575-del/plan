<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>êµ¬ê¸€ ì‹œíŠ¸ ì—°ë™ í€´ì¦ˆ</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>

<style>
    body { 
        font-family: sans-serif; 
        max-width: 600px; 
        margin: 50px auto; 
        font-size: 18px;
    }
    .card { 
        border: 1px solid #ddd; 
        padding: 25px; 
        border-radius: 12px;
        background: #fafafa;
    }
    button { 
        margin-top: 20px; 
        padding: 12px; 
        width: 100%; 
        font-size: 17px; 
        cursor: pointer; 
        border-radius: 8px; 
        border: none;
        background: #4CAF50;
        color: white;
    }
    #answerArea { 
        margin-top: 15px;
        display: none; 
    }
</style>
</head>
<body>

<h2>êµ¬ê¸€ ì‹œíŠ¸ ì—°ë™ í€´ì¦ˆ</h2>

<div id="quiz" style="display:none;">
    <div class="card">
        <div id="question"></div>
        <div id="answerArea"></div>
    </div>

    <button id="showAnswerBtn">ì •ë‹µ ë³´ê¸°</button>
    <button id="nextBtn" style="display:none;">ë‹¤ìŒ ë¬¸ì œ</button>
</div>

<script>
let quizData = [];
let idx = 0;

// ğŸ”¥ êµ¬ê¸€ ì‹œíŠ¸ CSV ìë™ URL
const CSV_URL = "https://docs.google.com/spreadsheets/d/16VxOkZhO-TgUWYdQ0BGyGhBR5MKUvyb9Mo6lv4UVx0Q/export?format=csv";

function clean(text) {
    if (!text) return "";
    return text.replace(/\r?\n|\r/g, " ").trim();
}

// CSV ë¶ˆëŸ¬ì˜¤ê¸°
fetch(CSV_URL)
    .then(res => res.text())
    .then(csvText => {
        Papa.parse(csvText, {
            header: true,
            skipEmptyLines: true,
            complete: function(results) {
                quizData = results.data.map(row => ({
                    question: clean(row["ë¬¸ì œ"]),
                    answer: clean(row["ë‹µ"]),
                    note: clean(row["ë¹„ê³ "])
                }));
                startQuiz();
            }
        });
    })
    .catch(err => alert("CSV ë¡œë”© ì˜¤ë¥˜: " + err));

function startQuiz() {
    if (quizData.length === 0) {
        alert("CSV ë°ì´í„° ì—†ìŒ. 'ë¬¸ì œ, ë‹µ, ë¹„ê³ ' í—¤ë” í™•ì¸ í•„ìš”");
        return;
    }
    document.getElementById('quiz').style.display = 'block';
    showQuestion();
}

function showQuestion() {
    const item = quizData[idx];

    document.getElementById("question").innerText = "Q. " + item.question;

    let html = "<b>A. " + item.answer + "</b>";
    if (item.note) html += "<br><small>ë¹„ê³ : " + item.note + "</small>";

    document.getElementById("answerArea").innerHTML = html;
    document.getElementById("answerArea").style.display = "none";

    document.getElementById("showAnswerBtn").style.display = "block";
    document.getElementById("nextBtn").style.display = "none";
}

document.getElementById("showAnswerBtn").onclick = () => {
    document.getElementById("answerArea").style.display = "block";
    document.getElementById("showAnswerBtn").style.display = "none";
    document.getElementById("nextBtn").style.display = "block";
};

document.getElementById("nextBtn").onclick = () => {
    idx = (idx + 1) % quizData.length;
    showQuestion();
};
</script>

</body>
</html>
